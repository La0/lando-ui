{% extends "partials/layout.html" %}
{% block page_title %}D{{revision['id']}} - Lando - Mozilla{% endblock %}

{% block main %}
<main class="RevisionPage container content" data-state='{{ revision|tojson }}'>

  <div class="RevisionPage-revision">
    <form action="" method="post">
      {{form.csrf_token}}
      {{form.diff_id}}

      <!-- page heading -->
      <h1 class="RevisionPage-heading">D{{revision['id']}}: {{revision['title']}}</h1>
      <div class="RevisionPage-heading-statuses">
        <span class="u-revision-badge--positive">Ready to Land</span>
        <span class="u-revision-badge--negative">Landing Failed</span>
        <span class="u-revision-badge--neutral">Landed - 9e5c8fa3db7f835109de62eca34bde596fd93517</span>
        <span class="u-revision-badge">Landing in Progress</span>
      </div>

      <!-- timeline -->
      <div class="RevisionPage-section-block">
        <div class="RevisionPage-section-label">
          Timeline
        </div>
        <div class="RevisionPage-section-contents">

          <div class="Revision-Page-timeline">

            <div class="Revision-Page-timeline-item">
              <div class="Revision-Page-timeline-item-status">
                <span class="u-revision-badge--negative">
                  Failed to Land
                </span>
              </div>

              <div class="Revision-Page-timeline-item-detail">
                With <a href="">Diff 15</a> on Oct. 10, 2017 10:58 PM EST, by imadueme@mozilla.com.<br>
                <strong>Error:</strong> An intermittent internal error occurred.
              </div>
            </div>

            <div class="Revision-Page-timeline-item">
              <div class="Revision-Page-timeline-item-status">
                <span class="u-revision-badge--negative">
                  Failed to Land
                </span>
              </div>

              <div class="Revision-Page-timeline-item-detail">
                With <a href="">Diff 15</a> on Oct. 10, 2017 10:58 PM EST, by imadueme@mozilla.com.<br>
                <strong>Error:</strong> An intermittent internal error occurred.
              </div>
            </div>

            <div class="Revision-Page-timeline-item">
              <div class="Revision-Page-timeline-item-status">
                <span class="u-revision-badge--positive">
                  Passed on Try
                </span>
              </div>

              <div class="Revision-Page-timeline-item-detail">
                With <a href="">Diff 15</a> on Oct. 10, 2017 10:58 PM EST, by imadueme@mozilla.com. <a href="">See on Treeherder</a>.
              </div>
            </div>
          </div>

        </div>
      </div>

      <!-- details -->
      <div class="RevisionPage-section-block">
        <div class="RevisionPage-section-label">
          Details
        </div>
        <div class="RevisionPage-section-contents">
          <div>
            <a href="{{revision['url']}}?id={{revision['diff']['id']}}">Diff {{revision['diff']['id']}}</a> authored by
            {% if revision['diff']['authors'] %}
            <strong>{{revision['diff']['authors'][0]['name']}} &lt;{{revision['diff']['authors'][0]['email']}}&gt;</strong>
            {% else %}
            Unknown
            {% endif %}
            on <time data-timestamp="{{revision['diff']['date_created']}}"></time>
          </div>
          {% with reviewers=revision['reviewers'] %}
            {% include "revision/partials/reviewers.html" %}
          {% endwith %}
        </div>
      </div>

      <!-- commit message -->
      <div class="RevisionPage-section-block">
        <div class="RevisionPage-section-label">
          Commit Message
        </div>
        <div class="RevisionPage-section-contents">
          <div clss="RevisionPage-commit-preview">
            {{revision['commit_message_preview']}}
          </div>
          <div class="RevisionPage-commit-full">{{revision['commit_message_preview']}}

{{revision['summary']}}</div>
          <div class="RevisionPage-commit-buttons">
            <button type="button" class="show-full-message" data-hide-message="Hide Full Message">Toggle Full Commit Message</button>
          </div>
        </div>
      </div>

      <!-- warnings -->
      <div class="RevisionPage-warnings">
        <div class="RevisionPage-warning">
          <label>
            <input type="checkbox" value="acknowledge" />
            This is a warning because sometimes things can go sort of wrong very quickly.
          </label>
        </div>
        <div class="RevisionPage-warning">
          <label>
            <input type="checkbox" value="acknowledge" />
            This is a warning because sometimes things can go sort of wrong very quickly.
          </label>
        </div>
      </div>

      <!-- actions -->
      <div class="RevisionPage-actions">
        <button>
          <div class="RevisionPage-actions-headline">Land D1057</div>
          <div class="RevisionPage-actions-subtitle">autoland is open</div>
        </button>

        <button disabled>
          <div class="RevisionPage-actions-headline">Landing Disabled</div>
          <div class="RevisionPage-actions-subtitle">autoland is closed</div>
        </button>

        <button disabled>
          <div class="RevisionPage-actions-headline">Landing in Progress</div>
          <div class="RevisionPage-actions-subtitle">check back soon</div>
        </button>
      </div>

    </form>
  </div>
</main>
{% endblock %}
